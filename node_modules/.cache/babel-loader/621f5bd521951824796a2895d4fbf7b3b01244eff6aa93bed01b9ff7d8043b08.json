{"ast":null,"code":"var _jsxFileName = \"/home/andrewwang/MoneyWatcher/src/pages/LoginWin.js\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport ErrorBox from \"./ErrorBox\";\nimport '../css/styles.css';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { jsonFetch, buildIpAddress, setActive } from \"../components/common\";\nimport MainContext from \"./MainContext\";\n//import { fetchText } from \"../components/common.js\"\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LoginWin = () => {\n  _s();\n  let navigate = useNavigate();\n  const firstName_0 = \"\";\n  const lastName_0 = \"\";\n  const email_0 = \"\";\n  const password_0 = \"\";\n  const [firstName, setFirstName] = React.useState(firstName_0);\n  const [lastName, setLastName] = React.useState(lastName_0);\n  const [email, setEmail] = React.useState(email_0);\n  const [password, setPassword] = React.useState(password_0);\n  const ctx = React.useContext(MainContext);\n  const [errmsg, setErrmsg] = React.useState(\"\");\n  function prepEdited() {\n    setErrmsg(\"\");\n  }\n  function firstNameChange(e) {\n    setFirstName(e.target.value);\n    prepEdited();\n  }\n  function lastNameChange(e) {\n    setLastName(e.target.value);\n    prepEdited();\n  }\n  function emailChange(e) {\n    setEmail(e.target.value);\n    prepEdited();\n  }\n  function passwordChange(e) {\n    setPassword(e.target.value);\n    prepEdited();\n  }\n  function resetHandle() {\n    setFirstName(firstName_0);\n    setLastName(lastName_0);\n    setEmail(email_0);\n    setPassword(password_0);\n  }\n  function handleErrorClose() {\n    setErrmsg(''); // Clear the error message, hiding the error box\n  }\n  function handleSubmit(event) {\n    event.preventDefault();\n    const fd = new FormData(event.target);\n    // const ..= fd.getAll(\"multiple\")  //for same name, diff value\n    const data = Object.fromEntries(fd.entries());\n    const postdata = {\n      email: data.email,\n      password: data.password\n    };\n    // console.log(\"data=\", data, \"post=\", postdata);\n    const filename = buildIpAddress(3000, \"/api/v1/customer/login\");\n    //const filename = \"http://127.0.0.1:3000/api/v1/login\"\n    jsonFetch(filename, postdata).then(d => {\n      // console.log(\"d=\", d);\n      d.json().then(json => {\n        // console.log(\"got json: \", json, \"data=\", data);\n        if (json.status === \"success\") {\n          // console.log('good');\n          localStorage.setItem(\"first_name\", json.data.first_name);\n          localStorage.setItem(\"last_name\", json.data.last_name);\n          localStorage.setItem(\"email\", json.data.email);\n          localStorage.setItem(\"token\", json.token);\n          ctx.setActive1(\"1\");\n          setErrmsg(\"\");\n          navigate(\"/\");\n        } else {\n          setErrmsg(\"Login Error: Invalid Username and/or Password\");\n        }\n      });\n    }).catch(err => {\n      // console.log(\"ERROR(signup)\", err);\n      setErrmsg(\"Login Error2\");\n    });\n  }\n  /*<Link to='/forgotpassword' style={{margin:\"1rem\"}}>Forgot Password</Link>*/\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"blueHeader\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"labelText\",\n          htmlFor: \"email\",\n          children: \"email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"email\",\n          type: \"text\",\n          name: \"email\",\n          onChange: emailChange,\n          value: email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"labelText\",\n          htmlFor: \"password\",\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"password\",\n          type: \"password\",\n          name: \"password\",\n          value: password,\n          onChange: passwordChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"form-actions\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"button-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"centered-button\",\n            onClick: resetHandle,\n            children: \"Reset\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"centered-button\",\n            children: \"Log In\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), errmsg !== \"\" && /*#__PURE__*/_jsxDEV(ErrorBox, {\n      errorMessage: errmsg,\n      onClose: handleErrorClose\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 26\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n};\n_s(LoginWin, \"LuKtssQckWSLDvc5sTmAWeiBKiw=\", false, function () {\n  return [useNavigate];\n});\n_c = LoginWin;\nexport default LoginWin;\nvar _c;\n$RefreshReg$(_c, \"LoginWin\");","map":{"version":3,"names":["React","ErrorBox","Link","useNavigate","jsonFetch","buildIpAddress","setActive","MainContext","jsxDEV","_jsxDEV","LoginWin","_s","navigate","firstName_0","lastName_0","email_0","password_0","firstName","setFirstName","useState","lastName","setLastName","email","setEmail","password","setPassword","ctx","useContext","errmsg","setErrmsg","prepEdited","firstNameChange","e","target","value","lastNameChange","emailChange","passwordChange","resetHandle","handleErrorClose","handleSubmit","event","preventDefault","fd","FormData","data","Object","fromEntries","entries","postdata","filename","then","d","json","status","localStorage","setItem","first_name","last_name","token","setActive1","catch","err","children","onSubmit","className","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","id","type","name","onChange","required","onClick","errorMessage","onClose","_c","$RefreshReg$"],"sources":["/home/andrewwang/MoneyWatcher/src/pages/LoginWin.js"],"sourcesContent":["import React from \"react\";\nimport ErrorBox from \"./ErrorBox\";\nimport '../css/styles.css'; \nimport { Link, useNavigate } from 'react-router-dom'\nimport { jsonFetch, buildIpAddress, setActive } from \"../components/common\";\nimport MainContext from \"./MainContext\"\n//import { fetchText } from \"../components/common.js\"\n\nconst LoginWin = () => {\n  let navigate = useNavigate();\n  const firstName_0 = \"\";\n  const lastName_0 = \"\";\n  const email_0 = \"\"\n  const password_0 = \"\";\n  const [firstName, setFirstName] = React.useState(firstName_0);\n  const [lastName, setLastName] = React.useState(lastName_0);\n  const [email, setEmail] = React.useState(email_0)\n  const [password, setPassword] = React.useState(password_0)\n  const ctx = React.useContext(MainContext)\n  const [errmsg, setErrmsg] = React.useState(\"\");\n\n  function prepEdited() { setErrmsg(\"\"); }\n  function firstNameChange(e) { setFirstName(e.target.value); prepEdited(); }\n  function lastNameChange(e) { setLastName(e.target.value); prepEdited(); }\n  function emailChange(e) { setEmail(e.target.value); prepEdited(); }\n  function passwordChange(e) { setPassword(e.target.value); prepEdited(); }\n  function resetHandle() {\n    setFirstName(firstName_0);\n    setLastName(lastName_0);\n    setEmail(email_0);\n    setPassword(password_0);\n  }\n  function handleErrorClose()  {\n    setErrmsg(''); // Clear the error message, hiding the error box\n  }\n  \n  \n  function handleSubmit(event) {\n    event.preventDefault();\n    const fd = new FormData(event.target);\n    // const ..= fd.getAll(\"multiple\")  //for same name, diff value\n    const data = Object.fromEntries(fd.entries());\n    const postdata = {\n      email: data.email,\n      password: data.password\n    }\n    // console.log(\"data=\", data, \"post=\", postdata);\n    const filename = buildIpAddress(3000, \"/api/v1/customer/login\");\n    //const filename = \"http://127.0.0.1:3000/api/v1/login\"\n    jsonFetch(filename, postdata)\n      .then((d) => {\n        // console.log(\"d=\", d);\n        d.json()\n          .then((json) => {\n            // console.log(\"got json: \", json, \"data=\", data);\n            if (json.status === \"success\") {\n              // console.log('good');\n              localStorage.setItem(\"first_name\", json.data.first_name)\n              localStorage.setItem(\"last_name\", json.data.last_name)\n              localStorage.setItem(\"email\", json.data.email)\n              localStorage.setItem(\"token\", json.token)\n              ctx.setActive1(\"1\");\n              setErrmsg(\"\");\n              navigate(\"/\");\n            } else {\n              setErrmsg(\"Login Error: Invalid Username and/or Password\");\n            }\n          })\n      }).catch((err) => {\n        // console.log(\"ERROR(signup)\", err);\n        setErrmsg(\"Login Error2\");\n      })\n  }\n  /*<Link to='/forgotpassword' style={{margin:\"1rem\"}}>Forgot Password</Link>*/\n  return (\n    <div>\n      <form onSubmit={handleSubmit}>\n        <h2 className=\"blueHeader\">Login</h2>\n        {/* <div>\n            <label htmlFor=\"name\">First Name</label>\n            <input id=\"firstname\" type=\"name\" name=\"firstname\" value={firstName} onChange={firstNameChange} required/>\n          </div>\n          <div>\n            <label htmlFor=\"name\">Last Name</label>\n            <input id=\"lastname\" type=\"name\" name=\"lastname\" value={lastName} onChange={lastNameChange} required/>\n          </div> */}\n        <div>\n          <label className=\"labelText\" htmlFor=\"email\">email</label>\n          <input id=\"email\" type=\"text\" name=\"email\" onChange={emailChange} value={email} />\n        </div>\n        <div>\n          <label className=\"labelText\" htmlFor=\"password\">Password</label>\n          <input id=\"password\" type=\"password\" name=\"password\" value={password} onChange={passwordChange} required />\n        </div>\n        <p className=\"form-actions\">\n          <div className=\"button-container\">\n            <button className=\"centered-button\" onClick={resetHandle}>\n              Reset\n            </button>\n            <button type=\"submit\" className=\"centered-button\">\n              Log In\n            </button>\n          </div>\n        </p>\n      </form>\n\n      {errmsg !== \"\" && (<ErrorBox errorMessage={errmsg} onClose={handleErrorClose} />)}\n    </div>\n  )\n}\n\nexport default LoginWin;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}