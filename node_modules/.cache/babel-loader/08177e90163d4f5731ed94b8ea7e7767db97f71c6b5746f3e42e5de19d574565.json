{"ast":null,"code":"import React, { useRef, useState, useCallback, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nvar styles = {\n  \"container\": \"_1Lxpd\",\n  \"toolBoxContainer\": \"_2PfdK\",\n  \"colors\": \"_15Nzf\",\n  \"color\": \"_3thI9\",\n  \"active\": \"_3sodH\"\n};\nfunction DrawingToolBox(_ref) {\n  var colors = _ref.colors,\n    active = _ref.active,\n    onChange = _ref.onChange;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.toolBoxContainer\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.colors\n  }, colors.map(function (color, key) {\n    var _classNames;\n    return /*#__PURE__*/React.createElement(\"button\", {\n      key: key,\n      onClick: function onClick() {\n        return onChange(color);\n      },\n      className: classNames(styles.color, (_classNames = {}, _classNames[styles.active] = active === color, _classNames)),\n      style: {\n        backgroundColor: color\n      }\n    });\n  })));\n}\nfunction ReactCanvasPaint(props) {\n  var canvas = useRef(null);\n  var _useState = useState(false),\n    drawing = _useState[0],\n    setDrawing = _useState[1];\n  var _useState2 = useState(null),\n    position = _useState2[0],\n    setPosition = _useState2[1];\n  var _useState3 = useState(props.colors[0]),\n    activeColor = _useState3[0],\n    setActiveColor = _useState3[1];\n  var onDown = useCallback(function (event) {\n    var coordinates = getCoordinates(event);\n    if (coordinates) {\n      setPosition(coordinates);\n      setDrawing(true);\n    }\n  }, []);\n  var onUp = useCallback(function () {\n    setDrawing(false);\n    setPosition(null);\n  }, []);\n  var getCoordinates = function getCoordinates(event) {\n    if (!canvas.current) {\n      return null;\n    }\n    var x = event.pageX || event.touches[0].pageX;\n    var y = event.pageY || event.touches[0].pageY;\n    return {\n      x: x - canvas.current.offsetLeft,\n      y: y - canvas.current.offsetTop\n    };\n  };\n  var onMove = useCallback(function (event) {\n    if (drawing) {\n      var newPosition = getCoordinates(event);\n      if (position && newPosition) {\n        drawLine(position, newPosition);\n        setPosition(newPosition);\n      }\n    }\n  }, [drawing, position]);\n  var drawLine = function drawLine(originalPosition, newPosition) {\n    if (!canvas.current) {\n      return null;\n    }\n    var context = canvas.current.getContext('2d');\n    if (context) {\n      context.strokeStyle = activeColor;\n      context.lineJoin = 'round';\n      context.lineWidth = props.strokeWidth;\n      context.beginPath();\n      context.moveTo(originalPosition.x, originalPosition.y);\n      context.lineTo(newPosition.x, newPosition.y);\n      context.closePath();\n      context.stroke();\n      handleDraw(context.getImageData(0, 0, props.width, props.height));\n    }\n  };\n  var handleDraw = function handleDraw(data) {\n    if (typeof props.onDraw === 'function') {\n      props.onDraw(data);\n    }\n  };\n  useEffect(function () {\n    if (typeof props.data === 'object' && canvas.current) {\n      var context = canvas.current.getContext('2d');\n      context.putImageData(props.data, 0, 0);\n    }\n  }, [props.data]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container\n  }, /*#__PURE__*/React.createElement(\"canvas\", {\n    ref: canvas,\n    onMouseDown: props.viewOnly ? undefined : onDown,\n    onTouchStart: props.viewOnly ? undefined : onDown,\n    onMouseUp: props.viewOnly ? undefined : onUp,\n    onTouchEnd: props.viewOnly ? undefined : onUp,\n    onMouseLeave: props.viewOnly ? undefined : onUp,\n    onMouseMove: props.viewOnly ? undefined : onMove,\n    onTouchMove: props.viewOnly ? undefined : onMove,\n    width: props.width,\n    height: props.height\n  }), !props.viewOnly && /*#__PURE__*/React.createElement(DrawingToolBox, {\n    colors: props.colors,\n    active: activeColor,\n    onChange: setActiveColor\n  }));\n}\nReactCanvasPaint.propTypes = {\n  width: PropTypes.number,\n  height: PropTypes.number,\n  viewOnly: PropTypes.bool,\n  data: PropTypes.object,\n  onDraw: PropTypes.func,\n  colors: PropTypes.arrayOf(PropTypes.string),\n  strokeWidth: PropTypes.number\n};\nReactCanvasPaint.defaultProps = {\n  width: 400,\n  height: 400,\n  viewOnly: false,\n  data: undefined,\n  onDraw: undefined,\n  colors: ['#7030A2', '#000000', '#0170C1', '#FE0002', '#FFFF01', '#00AF52'],\n  strokeWidth: 5\n};\nexport default ReactCanvasPaint;","map":{"version":3,"names":["DrawingToolBox","_ref","colors","active","onChange","React","createElement","className","styles","toolBoxContainer","map","color","key","_classNames","onClick","classNames","style","backgroundColor","ReactCanvasPaint","props","canvas","useRef","_useState","useState","drawing","setDrawing","_useState2","position","setPosition","_useState3","activeColor","setActiveColor","onDown","useCallback","event","coordinates","getCoordinates","onUp","current","x","pageX","touches","y","pageY","offsetLeft","offsetTop","onMove","newPosition","drawLine","originalPosition","context","getContext","strokeStyle","lineJoin","lineWidth","strokeWidth","beginPath","moveTo","lineTo","closePath","stroke","handleDraw","getImageData","width","height","data","onDraw","useEffect","putImageData","container","ref","onMouseDown","viewOnly","undefined","onTouchStart","onMouseUp","onTouchEnd","onMouseLeave","onMouseMove","onTouchMove","propTypes","PropTypes","number","bool","object","func","arrayOf","string","defaultProps"],"sources":["/home/andrewwang/ImageClassifier/node_modules/react-canvas-paint/src/index.js"],"sourcesContent":["import React, { useRef, useState, useCallback, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport styles from './styles.module.css'\n\nfunction DrawingToolBox({ colors, active, onChange }) {\n  return (\n    <div className={styles.toolBoxContainer}>\n      <div className={styles.colors}>\n        {colors.map((color, key) => (\n          <button\n            key={key}\n            onClick={() => onChange(color)}\n            className={classNames(styles.color, {\n              [styles.active]: active === color\n            })}\n            style={{ backgroundColor: color }}\n          />\n        ))}\n      </div>\n    </div>\n  )\n}\n\nfunction ReactCanvasPaint(props) {\n  const canvas = useRef(null)\n  const [drawing, setDrawing] = useState(false)\n  const [position, setPosition] = useState(null)\n  const [activeColor, setActiveColor] = useState(props.colors[0])\n\n  const onDown = useCallback((event) => {\n    const coordinates = getCoordinates(event)\n    if (coordinates) {\n      setPosition(coordinates)\n      setDrawing(true)\n    }\n  }, [])\n\n  const onUp = useCallback(() => {\n    setDrawing(false)\n    setPosition(null)\n  }, [])\n\n  const getCoordinates = (event) => {\n    if (!canvas.current) {\n      return null\n    }\n\n    const x = event.pageX || event.touches[0].pageX\n    const y = event.pageY || event.touches[0].pageY\n\n    return {\n      x: x - canvas.current.offsetLeft,\n      y: y - canvas.current.offsetTop\n    }\n  }\n\n  const onMove = useCallback(\n    (event) => {\n      if (drawing) {\n        const newPosition = getCoordinates(event)\n        if (position && newPosition) {\n          drawLine(position, newPosition)\n          setPosition(newPosition)\n        }\n      }\n    },\n    [drawing, position]\n  )\n\n  const drawLine = (originalPosition, newPosition) => {\n    if (!canvas.current) {\n      return null\n    }\n\n    const context = canvas.current.getContext('2d')\n\n    if (context) {\n      context.strokeStyle = activeColor\n      context.lineJoin = 'round'\n      context.lineWidth = props.strokeWidth\n\n      context.beginPath()\n      context.moveTo(originalPosition.x, originalPosition.y)\n      context.lineTo(newPosition.x, newPosition.y)\n      context.closePath()\n\n      context.stroke()\n      handleDraw(context.getImageData(0, 0, props.width, props.height))\n    }\n  }\n\n  const handleDraw = (data) => {\n    if (typeof props.onDraw === 'function') {\n      props.onDraw(data)\n    }\n  }\n\n  useEffect(() => {\n    if (typeof props.data === 'object' && canvas.current) {\n      const context = canvas.current.getContext('2d')\n      // TODO: scale imageData\n      context.putImageData(props.data, 0, 0)\n    }\n  }, [props.data])\n\n  return (\n    <div className={styles.container}>\n      <canvas\n        ref={canvas}\n        onMouseDown={props.viewOnly ? undefined : onDown}\n        onTouchStart={props.viewOnly ? undefined : onDown}\n        onMouseUp={props.viewOnly ? undefined : onUp}\n        onTouchEnd={props.viewOnly ? undefined : onUp}\n        onMouseLeave={props.viewOnly ? undefined : onUp}\n        onMouseMove={props.viewOnly ? undefined : onMove}\n        onTouchMove={props.viewOnly ? undefined : onMove}\n        width={props.width}\n        height={props.height}\n      />\n      {!props.viewOnly && (\n        <DrawingToolBox\n          colors={props.colors}\n          active={activeColor}\n          onChange={setActiveColor}\n        />\n      )}\n    </div>\n  )\n}\n\nReactCanvasPaint.propTypes = {\n  width: PropTypes.number,\n  height: PropTypes.number,\n  viewOnly: PropTypes.bool,\n  data: PropTypes.object,\n  onDraw: PropTypes.func,\n  colors: PropTypes.arrayOf(PropTypes.string),\n  strokeWidth: PropTypes.number\n}\n\nReactCanvasPaint.defaultProps = {\n  width: 400,\n  height: 400,\n  viewOnly: false,\n  data: undefined,\n  onDraw: undefined,\n  colors: ['#7030A2', '#000000', '#0170C1', '#FE0002', '#FFFF01', '#00AF52'],\n  strokeWidth: 5\n}\n\nexport default ReactCanvasPaint\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}